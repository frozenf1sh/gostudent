# ğŸ“– æ´»åŠ¨æŠ¥åç®¡ç†ç³»ç»Ÿ API æ–‡æ¡£ (v1)

æœ¬æ–‡æ¡£æè¿°äº†æ´»åŠ¨æŠ¥åç®¡ç†ç³»ç»Ÿçš„ RESTful API æ¥å£ï¼ŒåŸºäº Gin æ¡†æ¶å’Œ JWT è®¤è¯ã€‚

**åŸºç¡€ URL (Base URL):** `/api/v1`
**è®¤è¯æ–¹å¼ (Authentication):** JWT Bearer Token (ä»… Admin Group éœ€è¦)

-----

## 1\. åŸºç¡€å…¬å…±æ¥å£ (System & Health Check)

| è·¯ç”±æè¿° | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | åŠŸèƒ½ |
| :--- | :--- | :--- | :--- | :--- |
| **å¥åº·æ£€æŸ¥** | `GET` | `/ping` | å¦ | æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œæ­£å¸¸ã€‚ |

**è¯·æ±‚/å“åº”ç¤ºä¾‹:**

  * **GET** `/ping`
      * **å“åº” (200 OK):**
        ```json
        {
          "code": 200,
          "data": "pong"
        }
        ```

-----

## 2\. ç®¡ç†å‘˜è®¤è¯æ¥å£ (Admin Authentication)

è¯¥ç»„æ¥å£ç”¨äºç®¡ç†å‘˜ç™»å½•å’Œè·å–è®¿é—®ä»¤ç‰Œã€‚

### 2.1. ç®¡ç†å‘˜ç™»å½•

| è·¯ç”±æè¿° | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | åŠŸèƒ½ |
| :--- | :--- | :--- | :--- | :--- |
| **ç™»å½•** | `POST` | `/api/v1/admin/login` | å¦ | ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç è·å– JWT Tokenã€‚ |

**è¯·æ±‚å‚æ•° (Body):** `application/json`
| å­—æ®µ | ç±»å‹ | æ˜¯å¦å¿…éœ€ | æè¿° |
| :--- | :--- | :--- | :--- |
| `username` | string | æ˜¯ | ç®¡ç†å‘˜ç”¨æˆ·åã€‚ |
| `password` | string | æ˜¯ | ç®¡ç†å‘˜å¯†ç ã€‚ |

**å“åº” (200 OK):**

```json
{
  "code": 200,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiI...", // ç”¨äºåç»­ Admin æ¥å£çš„ Bearer Token
    "username": "admin_user"
  }
}
```

**é”™è¯¯å“åº”:**

  * **400 Bad Request:** è¯·æ±‚å‚æ•°ä¸å®Œæ•´æˆ–æ ¼å¼é”™è¯¯ã€‚
  * **401 Unauthorized:** ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ã€‚

-----

## 3\. æ´»åŠ¨ç®¡ç†æ¥å£ (Admin Group - Requires JWT)

æ‰€æœ‰ `/api/v1/admin/activities` è·¯å¾„ä¸‹çš„æ¥å£éƒ½éœ€è¦åœ¨ Header ä¸­æºå¸¦ **`Authorization: Bearer <Token>`**ã€‚

### 3.1. åˆ›å»ºæ´»åŠ¨

| è·¯ç”±æè¿° | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | åŠŸèƒ½ |
| :--- | :--- | :--- | :--- | :--- |
| **åˆ›å»ºæ´»åŠ¨** | `POST` | `/api/v1/admin/activities` | æ˜¯ | åˆ›å»ºä¸€ä¸ªæ–°çš„æ´»åŠ¨ï¼Œåˆå§‹çŠ¶æ€é€šå¸¸ä¸ºè‰ç¨¿ (Draft)ã€‚ |

**è¯·æ±‚å‚æ•° (Body):** `model.CreateActivityRequest` (è¯¦ç»†ç»“æ„è¯·å‚è€ƒé¡¹ç›® `model` å±‚)

**å“åº” (200 OK):** `model.ActivityResponse` (è¿”å›åˆ›å»ºçš„æ´»åŠ¨è¯¦æƒ…)

### 3.2. ç®¡ç†å‘˜è·å–æ´»åŠ¨åˆ—è¡¨

| è·¯ç”±æè¿° | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | åŠŸèƒ½ |
| :--- | :--- | :--- | :--- | :--- |
| **æ´»åŠ¨åˆ—è¡¨** | `GET` | `/api/v1/admin/activities` | æ˜¯ | è·å–æ‰€æœ‰æ´»åŠ¨åˆ—è¡¨ï¼ŒåŒ…æ‹¬è‰ç¨¿ç­‰çŠ¶æ€ã€‚ |

**æŸ¥è¯¢å‚æ•° (Query):**
| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
| :--- | :--- | :--- | :--- |
| `page` | integer | 1 | é¡µç ã€‚ |
| `page_size` | integer | 10 | æ¯é¡µå¤§å°ã€‚ |
| `status` | string | - | æ ¹æ®æ´»åŠ¨çŠ¶æ€è¿‡æ»¤ (ä¾‹å¦‚ï¼š`Draft`, `Published`)ã€‚ |

**å“åº” (200 OK):**

```json
{
  "code": 200,
  "data": {
    "list": [/* []model.ActivityResponse */],
    "total": 50,
    "page": 1
  }
}
```

### 3.3. æ›´æ–°æ´»åŠ¨

| è·¯ç”±æè¿° | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | åŠŸèƒ½ |
| :--- | :--- | :--- | :--- | :--- |
| **æ›´æ–°æ´»åŠ¨** | `PUT` | `/api/v1/admin/activities/:activity_id` | æ˜¯ | æ›´æ–°æŒ‡å®šæ´»åŠ¨çš„ä¿¡æ¯ã€‚ |

**è·¯å¾„å‚æ•° (Path):**
| å­—æ®µ | ç±»å‹ | æè¿° |
| :--- | :--- | :--- |
| `activity_id` | integer | è¦æ›´æ–°çš„æ´»åŠ¨ IDã€‚ |

**è¯·æ±‚å‚æ•° (Body):** `model.UpdateActivityRequest` (åŒ…å«è¦æ›´æ–°çš„å­—æ®µ)

**å“åº” (200 OK):** `model.ActivityResponse` (è¿”å›æ›´æ–°åçš„æ´»åŠ¨è¯¦æƒ…)

### 3.4. åˆ é™¤æ´»åŠ¨

| è·¯ç”±æè¿° | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | åŠŸèƒ½ |
| :--- | :--- | :--- | :--- | :--- |
| **åˆ é™¤æ´»åŠ¨** | `DELETE` | `/api/v1/admin/activities/:activity_id` | æ˜¯ | åˆ é™¤æŒ‡å®šçš„æ´»åŠ¨ã€‚ |

**è·¯å¾„å‚æ•° (Path):**
| å­—æ®µ | ç±»å‹ | æè¿° |
| :--- | :--- | :--- |
| `activity_id` | integer | è¦åˆ é™¤çš„æ´»åŠ¨ IDã€‚ |

**å“åº” (200 OK):**

```json
{
  "code": 200,
  "data": {
    "message": "æ´»åŠ¨åˆ é™¤æˆåŠŸ"
  }
}
```

### 3.5. å‘å¸ƒæ´»åŠ¨

| è·¯ç”±æè¿° | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | åŠŸèƒ½ |
| :--- | :--- | :--- | :--- | :--- |
| **å‘å¸ƒæ´»åŠ¨** | `POST` | `/api/v1/admin/activities/:activity_id/publish` | æ˜¯ | å°†æ´»åŠ¨çŠ¶æ€ä»è‰ç¨¿ (Draft) æ›´æ”¹ä¸ºå·²å‘å¸ƒ (Published)ã€‚ |

**è·¯å¾„å‚æ•° (Path):**
| å­—æ®µ | ç±»å‹ | æè¿° |
| :--- | :--- | :--- |
| `activity_id` | integer | è¦å‘å¸ƒçš„æ´»åŠ¨ IDã€‚ |

**å“åº” (200 OK):** `model.ActivityResponse` (è¿”å›å‘å¸ƒæˆåŠŸåçš„æ´»åŠ¨è¯¦æƒ…)ã€‚

-----

## 4\. å…¬å¼€æ´»åŠ¨æŸ¥è¯¢æ¥å£ (Public Activity Lookup)

è¿™äº›æ¥å£æ— éœ€è®¤è¯å³å¯è®¿é—®ã€‚

### 4.1. å…¬å…±æ´»åŠ¨åˆ—è¡¨

| è·¯ç”±æè¿° | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | åŠŸèƒ½ |
| :--- | :--- | :--- | :--- | :--- |
| **æ´»åŠ¨åˆ—è¡¨** | `GET` | `/api/v1/activities` | å¦ | è·å–å…¬å¼€çš„æ´»åŠ¨åˆ—è¡¨ã€‚ |

**æŸ¥è¯¢å‚æ•° (Query):**
| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
| :--- | :--- | :--- | :--- |
| `page` | integer | 1 | é¡µç ã€‚ |
| `page_size` | integer | 10 | æ¯é¡µå¤§å°ã€‚ |
| `status` | string | - | æ ¹æ®æ´»åŠ¨çŠ¶æ€è¿‡æ»¤ (é€šå¸¸ä»…è¿”å› `Published` çŠ¶æ€çš„æ´»åŠ¨)ã€‚ |

**å“åº” (200 OK):** (ä¸ Admin åˆ—è¡¨ç»“æ„ç›¸åŒ)

### 4.2. è·å–æ´»åŠ¨è¯¦æƒ… (å…¬å…±/ç®¡ç†å‘˜å…±ç”¨)

| è·¯ç”±æè¿° | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | åŠŸèƒ½ |
| :--- | :--- | :--- | :--- | :--- |
| **æ´»åŠ¨è¯¦æƒ…** | `GET` | `/api/v1/activities/:activity_id` | å¦ | æ ¹æ® ID è·å–æ´»åŠ¨è¯¦æƒ…ã€‚ |

**è·¯å¾„å‚æ•° (Path):**
| å­—æ®µ | ç±»å‹ | æè¿° |
| :--- | :--- | :--- |
| `activity_id` | integer | æ´»åŠ¨ IDã€‚ |

**å“åº” (200 OK):** `model.ActivityResponse` (æ´»åŠ¨è¯¦æƒ…)
**é”™è¯¯å“åº”:**

  * **404 Not Found:** æ´»åŠ¨ä¸å­˜åœ¨ã€‚

-----

## 5\. æŠ¥åä¸ç­¾åˆ°æ¥å£ (Registration & Sign-in)

### 5.1. æ´»åŠ¨æŠ¥å

| è·¯ç”±æè¿° | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | åŠŸèƒ½ |
| :--- | :--- | :--- | :--- | :--- |
| **æŠ¥å** | `POST` | `/api/v1/activities/:activity_id/register` | å¦ | å‚ä¸è€…é€šè¿‡æ´»åŠ¨ ID å’Œä¸ªäººä¿¡æ¯è¿›è¡ŒæŠ¥åã€‚ |

**è·¯å¾„å‚æ•° (Path):**
| å­—æ®µ | ç±»å‹ | æè¿° |
| :--- | :--- | :--- |
| `activity_id` | integer | è¦æŠ¥åçš„æ´»åŠ¨ IDã€‚ |

**è¯·æ±‚å‚æ•° (Body):** `model.CreateRegistrationRequest`
| å­—æ®µ | ç±»å‹ | æ˜¯å¦å¿…éœ€ | æè¿° |
| :--- | :--- | :--- | :--- |
| `participant_name` | string | æ˜¯ | å‚ä¸è€…å§“åã€‚ |
| `participant_phone` | string | æ˜¯ | å‚ä¸è€…æ‰‹æœºå·ã€‚ |
| `participant_college`| string | å¦ | å‚ä¸è€…å­¦é™¢/å•ä½ã€‚ |

**å“åº” (200 OK):** `model.RegistrationResponse` (è¿”å›æŠ¥åè®°å½•)
**é”™è¯¯å“åº”:**

  * **409 Conflict:** é‡å¤æŠ¥åæˆ–äººæ•°å·²æ»¡ã€‚
  * **403 Forbidden:** æŠ¥åæœªå¼€å§‹æˆ–å·²æˆªæ­¢ã€‚

### 5.2. æ´»åŠ¨ç­¾åˆ°

| è·¯ç”±æè¿° | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | åŠŸèƒ½ |
| :--- | :--- | :--- | :--- | :--- |
| **ç­¾åˆ°** | `POST` | `/api/v1/activities/:activity_id/signin` | å¦ | å‚ä¸è€…è¿›è¡Œç­¾åˆ°æ“ä½œã€‚ |

**çŠ¶æ€è¯´æ˜:** è¯¥åŠŸèƒ½åœ¨ Handler å±‚ä¸­è¢«ç¦ç”¨ï¼Œå°†è¿”å› **501 Not Implemented**ã€‚

-----

## 6\. ç®¡ç†å‘˜æŠ¥åè®°å½•æ¥å£ (Admin Registration Group - Requires JWT)

### 6.1. ç®¡ç†å‘˜è·å–æ´»åŠ¨æŠ¥ååˆ—è¡¨

| è·¯ç”±æè¿° | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | åŠŸèƒ½ |
| :--- | :--- | :--- | :--- | :--- |
| **æŠ¥ååˆ—è¡¨** | `GET` | `/api/v1/admin/activities/:activity_id/registrations` | æ˜¯ | ç®¡ç†å‘˜è·å–æŒ‡å®šæ´»åŠ¨çš„æ‰€æœ‰æŠ¥åè®°å½•ã€‚ |

**è·¯å¾„å‚æ•° (Path):**
| å­—æ®µ | ç±»å‹ | æè¿° |
| :--- | :--- | :--- |
| `activity_id` | integer | æ´»åŠ¨ IDã€‚ |

**æŸ¥è¯¢å‚æ•° (Query):**
| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
| :--- | :--- | :--- | :--- |
| `page` | integer | 1 | é¡µç ã€‚ |
| `page_size` | integer | 10 | æ¯é¡µå¤§å°ã€‚ |

**å“åº” (200 OK):**

```json
{
  "code": 200,
  "data": {
    "list": [/* []model.RegistrationResponse */],
    "total": 30,
    "page": 1
  }
}
```

### 6.2. è·å–å•æ¡æŠ¥åè®°å½•è¯¦æƒ…

| è·¯ç”±æè¿° | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | åŠŸèƒ½ |
| :--- | :--- | :--- | :--- | :--- |
| **è®°å½•è¯¦æƒ…** | `GET` | `/api/v1/admin/registrations/:registration_id` | æ˜¯ | ç®¡ç†å‘˜æ ¹æ®æŠ¥åè®°å½• ID è·å–è¯¦æƒ…ã€‚ |

**è·¯å¾„å‚æ•° (Path):**
| å­—æ®µ | ç±»å‹ | æè¿° |
| :--- | :--- | :--- |
| `registration_id` | integer | æŠ¥åè®°å½• IDã€‚ |

**å“åº” (200 OK):** `model.RegistrationResponse` (æŠ¥åè®°å½•è¯¦æƒ…)
**é”™è¯¯å“åº”:**

  * **404 Not Found:** æŠ¥åè®°å½•ä¸å­˜åœ¨ã€‚
